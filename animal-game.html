<head>
<script>
/** Node in the animal game binary tree. */
function Question(text) {
  this.text = text;
  this.yes = null;
  this.no = null;
  this.parent = null;
  
  this.isLeaf = function() {
    return !this.yes && !this.no;
  };
  
  this.addChild = function(child, yesAnswer) {
    child.parent = this;
    if (yesAnswer) {
      this.yes = child;
    } else {
      this.no = child;
    }
  };
}

var root = new Question("Does it fly");
root.addChild(new Question("Water Buffalo"), false);
root.addChild(new Question("Pelican"), true);

function say(text) {
  alert(text);
}
  
function ask(text) {
  return confirm(text + "?");
}
  
function askInput(text) {
  return prompt(text + "?");
}
  
function playGame() {
  var q = root;
  
  while (true) {
    if (q.isLeaf()) {
      var a = ask("Is it a " + q.text);
      if (a) {
        say("Hurrah!");
      } else {
        var animal = askInput("Whoops. What animal were you thinking of");
        var newQuestion = askInput("What would be a yes/no question that would differentiate between a " +
                                   animal + " and a " + q.text);
        a = ask("What would be the answer to '" + newQuestion + "' for a " + animal);
        animal = new Question(animal);
        newQuestion = new Question(newQuestion);
        qa = (q.parent.yes == q);
        q.parent.addChild(newQuestion, qa);
        newQuestion.addChild(animal, a);
        newQuestion.addChild(q, !a);
      }
      break;
    } else {
      var a = ask(q.text);
      q = a ? q.yes : q.no;
    }
  }
}



</script>
</head>
<body>
<h1>Animal game</h1>
  <button onClick="playGame()">Play the Animal guessing game</button>
</body>
